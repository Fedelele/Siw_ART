<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <title>All Artists</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/headerStyle.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" as="style" onload="this.rel='stylesheet'" href="https://fonts.googleapis.com/css2?family=Faculty+Glyphic&display=swap"/>
    <link rel="stylesheet" as="style" onload="this.rel='stylesheet'" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap"/>
    <link rel="stylesheet" th:href="@{/css/listStyle.css}">
    <script th:src="@{/js/confirmDelete.js}"></script>
    <script th:src="@{/js/search.js}" defer></script>
</head>
<body style='font-family: "Inter", sans-serif;'>
<header th:replace="~{fragments/header :: header(activePage='artists')}"></header>

<div class="container">
    <div class="list-header">
        <h2>All Artists</h2>
        <div class="list-actions">
            <div class="search-container">
                <i class="fas fa-search"></i>
                <input placeholder="Search Artist..." class="search-bar" value=""/>
            </div>
            <a sec:authorize="hasAuthority('ADMIN')" th:href="@{/admin/formNewArtist}" class="add-button" title="Add Artist">
                <i class="fas fa-plus"></i>
            </a>
        </div>
    </div>

    <div th:if="${!#lists.isEmpty(artists)}" class="list-container">
        <!-- Card for each artist -->
        <div th:each="artist : ${artists}" class="card-item">
            <a class="card-item-link" th:href="@{'/artist/details/' + ${artist.id}}">
                <img class="card-thumbnail" th:src="${artist.imageUrl != null ? artist.imageUrl : '/images/placeholder.png'}" alt="Artist Portrait">
                <div class="card-details">
                    <span class="card-title" th:text="${artist.name + ' ' + artist.surname}">Artist's Name</span>
                    <span class="card-subtitle" th:text="${artist.nationality}">Nationality</span>
                </div>
            </a>
            <!-- Admin Actions -->
            <div class="card-actions" sec:authorize="hasAuthority('ADMIN')">
                <a th:href="@{'/admin/formUpdateArtist/' + ${artist.id}}" class="action-icon edit-icon" title="Edit">
                    <i class="fas fa-pen"></i>
                </a>
                <a href="#" th:data-id="${artist.id}" th:data-title="${artist.name + ' ' + artist.surname}" th:data-url="@{/admin/artist/delete/{id}(id=${artist.id})}" onclick="return confirmDelete(this)"
                   class="action-icon delete-icon" title="Delete">
                    <i class="fas fa-trash"></i>
                </a>
            </div>
        </div>
    </div>

    <!-- Placeholder for empty list -->
    <div th:if="${#lists.isEmpty(artists)}" class="placeholder-text">
        <p>No artists available for now!</p>
    </div>
</div>
</body>
</html>